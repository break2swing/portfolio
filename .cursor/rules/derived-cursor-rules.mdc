---
description: AI rules derived by SpecStory from the project AI interaction history
globs: *
---

## <headers/>

## PROJECT DOCUMENTATION & CONTEXT SYSTEM

This section covers guidelines for project documentation, especially regarding the `CLAUDE.md` and `AGENTS.md` files.

### Updating `CLAUDE.md` and `AGENTS.md`

The `CLAUDE.md` and `AGENTS.md` files must be kept up-to-date to reflect the current state of the codebase. The update process involves:

1.  **Reading Existing Files:** Always start by reading the current versions of `@CLAUDE.md` and `@AGENTS.md`.
2.  **Project Analysis:** Analyze the project structure, configuration, key components, contexts, services, and library configurations. Key files to inspect include:
    *   `package.json`
    *   `tsconfig.json`
    *   `next.config.js`
    *   `tailwind.config.ts`
    *   `app/layout.tsx`
    *   `app/*/page.tsx`
    *   `components/AppLayout.tsx`
    *   `contexts/*.tsx`
    *   `services/*.ts`
    *   `components/Sidebar.tsx`
    *   `components/Topbar.tsx`
    *   `lib/*.ts`
3.  **Change Identification:** Compare the current project state with the documentation in `CLAUDE.md` and `AGENTS.md` to identify discrepancies. Look for:
    *   New contexts or services.
    *   New routes or pages.
    *   New important dependencies.
    *   Changes in architecture.
    *   New patterns or conventions.
    *   Modifications in provider structure.
4.  **`CLAUDE.md` Content:**
    *   **Must Include:**
        *   Project overview.
        *   Development commands.
        *   High-level architecture (requiring the reading of multiple files).
        *   Route structure.
        *   Layout system.
        *   Theme and context systems.
        *   Backend integration (e.g., Supabase).
        *   Component library.
        *   Development patterns.
    *   **Must Not Include:**
        *   Obvious instructions.
        *   Generic development practices.
        *   Easily discoverable information.
5.  **`AGENTS.md` Content:**
    *   **Must Include:**
        *   Naming conventions.
        *   File structure (templates).
        *   Import order.
        *   Patterns to follow (Client vs Server, state management, error handling).
        *   Specific workflows (adding pages, service, component).
        *   Styling guidelines.
        *   Project-specific points of attention.
        *   Language conventions.
    *   **Template Format:** Always provide concrete code examples showing the expected file structure.
6.  **Validation:** Ensure consistency between the two files, up-to-date information, correct code examples, accurate file paths, and a provider hierarchy in `CLAUDE.md` that matches the actual code. Also ensure new services/contexts are documented.
7. **Process:**
    * List the identified changes as bullet points.
    * Update `CLAUDE.md` with the necessary modifications.
    * Update `AGENTS.md` with the necessary modifications.
    * Summarize the changes made in each file.
8. **Important Instructions:**
    * Be exhaustive in the analysis.
    * Verify ALL contexts in `contexts/`.
    * Verify ALL services in `services/`.
    * List all current routes.
    * Verify the actual structure of providers in `app/layout.tsx`.
    * Maintain the existing format and structure of the files.
    * Do not invent information - always check the code source.

## TECH STACK

## WORKFLOW & RELEASE RULES

*   When creating a pull request, analyze recent file changes to understand the modifications.
*   Utilize tools like `read_file`, `codebase_search`, and `grep` to identify changes.
*   Search for specific keywords or patterns related to the changes (e.g., "admin/(photos|music|videos|texts)" in `components/Sidebar.tsx`).
*   Search for "CHANGELOG" to track changes.
*   Based on the analysis, generate a detailed pull request description including:
    *   A summary of the changes.
    *   A list of the main changes.
    *   The files modified.
    *   Technical details.
    *   A checklist of tests performed.
    *   Screenshots (if applicable).
    *   Links to related issues.
    *   The type of change (e.g., feature).
    *   The impact of the change.
    *   Whether there are any breaking changes.
* When implementing new features that require database changes, such as adding a tagging system, the pull request description must include:
    * Database schema changes, including new tables, columns, and relationships.
    * RLS (Row Level Security) configurations for new tables.
    * Migration scripts (SQL) to apply the database changes.
    * Suggested default tags for the new feature, where applicable.

## CODING STANDARDS

## DEBUGGING